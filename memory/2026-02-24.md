# 2026-02-24 ‚Äî –î–Ω–µ–≤–Ω–∏–∫ —Å–µ—Å—Å–∏–∏

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ (—Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—è –∫–æ–º–º–∏—Ç–æ–≤)

### Migration 005 + –Ω–∞—á–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è "–ê–∫—Ç" (~14:10, commit c92f4c1)
- –ù–æ–≤—ã–π entity type `act` (–ê–∫—Ç, üìù, #F59E0B)
- Field definitions: act_number, act_date, comment, parent_contract_id, parent_contract_name, act_items, total_amount
- Relation type `supplement_to`
- `autoLinkEntities`: –≤–µ—Ç–∫–∞ –¥–ª—è act ‚Üí `supplement_to` –∫ –¥–æ–≥–æ–≤–æ—Ä—É + `subject_of` –æ—Ç –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
- Aggregate report Path 2: equipment ‚Üí subject_of ‚Üí act ‚Üí supplement_to ‚Üí contract
- Frontend: —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–∫—Ç–∞, —Å–µ–∫—Ü–∏—è "–ê–∫—Ç—ã" –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –¥–æ–≥–æ–≤–æ—Ä–∞, "–ò—Å—Ç–æ—Ä–∏—è —Ä–∞–±–æ—Ç" –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è

### Migration 006: –î–æ–≥–æ–≤–æ—Ä "–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è" (~14:18, commit f4cf4fe)
- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ ‚Üí –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –≤ field_definitions + UPDATE —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤
- CONTRACT_TYPE_FIELDS['–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è']: service_subject, building, equipment_list, contract_amount, service_comment
- CONTRACT_ROLES: –ó–∞–∫–∞–∑—á–∏–∫ / –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å (backward compat alias –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏)
- –ü–æ–ª—è service_subject, service_comment –≤ –ø–∏–≤–æ—Ç –∏ contractExtra

### Migration 007: –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è + —Ñ–∏–ª—å—Ç—Ä –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –≤ –∞–∫—Ç–∞—Ö (~14:31, commit 8512dca)
- FIX: eqListAdd ‚Äî querySelector('button:last-child') ‚Üí .eq-list-add-btn
- FEAT: –ø–æ–ª–µ contract_end_date (–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –¥–æ) –¥–ª—è contract –∏ supplement
- FEAT: –≤ —Ñ–æ—Ä–º–µ —Å–æ–∑–¥–∞–Ω–∏—è –∞–∫—Ç–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è –ø–æ equipment_list –¥–æ–≥–æ–≤–æ—Ä–∞ (_actEquipmentList)
- –ü–æ–¥—Å–∫–∞–∑–∫–∞ –≤ —à–∞–ø–∫–µ —Ñ–æ—Ä–º—ã: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –µ–¥–∏–Ω–∏—Ü –∏–∑ –¥–æ–≥–æ–≤–æ—Ä–∞

### –ü–æ–ª–µ –ù–î–° (~14:42, commit fdc49d8)
- "–≤ —Ç.—á. –ù–î–°, %" –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –æ–±—â–∏–µ –ø–æ–ª—è –≤—Å–µ—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤

### –§–∏–∫—Å—ã –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª–∞ –∞–∫—Ç–∞ (~14:44‚Äì14:57, commits c36782c, 4026fb5, 71bace9)
- openCreateActModal: –∑–∞–º–µ–Ω–∏—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π openModal() –Ω–∞ –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ DOM
- –û—Ç–ª–∞–¥–∫–∞: try/catch + –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ entityTypes –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ
- –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞–∫—Ç–∞: —É–±—Ä–∞—Ç—å –ª–∏—à–Ω–∏–µ –ø–æ–ª—è (parent_contract_id, parent_contract_name ‚Üí readonly/hidden)

### –ò–∑–º–µ–Ω—è–µ–º—ã–π —Ä–∞–∑–º–µ—Ä –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω (~14:53, commit 9d2cf38)
- CSS: .modal--wide (860px), .modal--full (100vw x 100dvh), transition
- setModalContent(html) ‚Äî –∏–Ω–∂–µ–∫—Ç–∏—Ä—É–µ—Ç –ø–∞–Ω–µ–ª—å —Ä–µ—Å–∞–π–∑–∞ + –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª
- setModalSize(size) ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –∫–ª–∞—Å—Å—ã, –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç –≤ _modalSize
- data-modal-size –∞—Ç—Ä–∏–±—É—Ç—ã –≤–º–µ—Å—Ç–æ onclick-—Å—Ç—Ä–æ–∫
- –í—Å–µ 9 –º–µ—Å—Ç –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª–∞ ‚Üí setModalContent()

### –§–∏–Ω–∞–ª—å–Ω—ã–π fix —Å–æ–∑–¥–∞–Ω–∏—è –∞–∫—Ç–∞ (~19:32, commit 8f59f6b)
- try/catch —Å alert –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –æ—à–∏–±–∫—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–∫—Ç–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ actType + –∞–≤—Ç–æ–ø–æ–¥–≥—Ä—É–∑–∫–∞ entityTypes –µ—Å–ª–∏ —Ç–∏–ø –Ω–µ –Ω–∞–π–¥–µ–Ω
- closeModal() —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç _submitting (—É—Å—Ç—Ä–∞–Ω—è–µ—Ç –∑–∞–ª–∏–ø–∞–Ω–∏–µ —Ñ–ª–∞–≥–∞)
- –ë–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π alert –ø—Ä–∏ actItems.length === 0

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–∫—Ç–∞ (–∏—Ç–æ–≥–æ–≤–∞—è)
```
–ê–∫—Ç {
  parent_id = contract_id  (–¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ parent_id)
  properties: {
    act_number, act_date, comment,
    parent_contract_id (readonly), parent_contract_name (readonly),
    act_items: JSON[{equipment_id, equipment_name, amount, description}],
    total_amount  (–∞–≤—Ç–æ)
  }
}
–û—Ç–Ω–æ—à–µ–Ω–∏—è:
  –∞–∫—Ç --supplement_to--> –¥–æ–≥–æ–≤–æ—Ä
  –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ --subject_of--> –∞–∫—Ç (–ø–æ –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏)
```

## –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–µ–ø–ª–æ—è –Ω–∞ –∫–æ–Ω–µ—Ü –¥–Ω—è
- Latest commit: `8f59f6b` (19:32 UTC)
- URL: https://indparkdocs.onrender.com
- Migrations: 001‚Äì007 –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è / To Do
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ê–∫—Ç—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ (—Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∞–∫—Ç)
- Path 1 –∏ Path 2 –≤ –æ—Ç—á—ë—Ç–µ "–ê–Ω–∞–ª–∏–∑ –∑–∞—Ç—Ä–∞—Ç" –º–æ–≥—É—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏
- –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π list view ‚Äî –≤ –æ–±—Å—É–∂–¥–µ–Ω–∏–∏, –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
