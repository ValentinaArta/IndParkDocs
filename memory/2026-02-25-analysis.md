# –ê–Ω–∞–ª–∏–∑: –¥—É–±–ª–∏–∫–∞—Ç—ã, –ª–∏—à–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ + –ø–ª–∞–Ω –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç—ã

## 1. –î—É–±–ª–∏–∫–∞—Ç—ã –∏ –≤–æ–ø—Ä–æ—Å—ã –ø–æ entity types

### ‚ö†Ô∏è `workshop` (–¶–µ—Ö, üè≠)
- –ü–æ —Å—É—Ç–∏ —Ç–æ –∂–µ —á—Ç–æ building (–∫–æ—Ä–ø—É—Å), —Ç–æ–ª—å–∫–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π
- –î—É–±–ª–∏—Ä—É–µ—Ç UI, –ø–æ–ª—è —Ç–µ –∂–µ: area, address
- –í–∞—Ä–∏–∞–Ω—Ç: —É–±—Ä–∞—Ç—å workshop, –∑–∞–º–µ–Ω–∏—Ç—å –ø–æ–ª–µ–º "–¢–∏–ø –∑–¥–∞–Ω–∏—è" —É building (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π / –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π / –°–∫–ª–∞–¥ / –ö–æ—Ç–µ–ª—å–Ω–∞—è...)
- **–ù—É–∂–Ω–æ —Å–ø—Ä–æ—Å–∏—Ç—å –í–∞–ª–µ–Ω—Ç–∏–Ω—É**: –Ω—É–∂–µ–Ω –ª–∏ workshop –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–∏–ø –∏–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –∫–æ—Ä–ø—É—Å–æ–≤?

### ‚ö†Ô∏è `document` (–î–æ–∫—É–º–µ–Ω—Ç, üìã)
- –ü–æ–ª—è: –Ω–æ–º–µ—Ä, —Ç–∏–ø (–≤—ã–±–æ—Ä: –ü—Ä–∏–∫–∞–∑/–ê–∫—Ç/–î–æ–ø.—Å–æ–≥–ª–∞—à–µ–Ω–∏–µ/–ü—Ä–æ—Ç–æ–∫–æ–ª/–°–ø—Ä–∞–≤–∫–∞/–ü—Ä–æ—á–µ–µ)
- –¢–∏–ø—ã –≤ options –î–£–ë–õ–ò–†–£–Æ–¢ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ entity_types: –ü—Ä–∏–∫–∞–∑ (order), –ê–∫—Ç (act), –î–æ–ø.—Å–æ–≥–ª–∞—à–µ–Ω–∏–µ (supplement)
- –ü–æ —Å—É—Ç–∏ —ç—Ç–æ "–ø—Ä–æ—á–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã" –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –¥—Ä—É–≥–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –í–µ—Ä–æ—è—Ç–Ω–æ –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –ü—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∏ –°–ø—Ä–∞–≤–æ–∫
- **–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ**: —É–±—Ä–∞—Ç—å –∏–∑ options '–ü—Ä–∏–∫–∞–∑','–ê–∫—Ç','–î–æ–ø.—Å–æ–≥–ª–∞—à–µ–Ω–∏–µ' ‚Äî –æ–Ω–∏ —É–∂–µ –µ—Å—Ç—å –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

### ‚ö†Ô∏è `order` (–ü—Ä–∏–∫–∞–∑, üìú)
- –ü–æ–ª—è: –Ω–æ–º–µ—Ä, –¥–∞—Ç–∞, —Ç–∏–ø (–ö–æ–Ω—Å–µ—Ä–≤–∞—Ü–∏—è/–†–∞—Å–∫–æ–Ω—Å–µ—Ä–≤–∞—Ü–∏—è/–°–ø–∏—Å–∞–Ω–∏–µ/–ü–µ—Ä–µ–¥–∞—á–∞/–ü—Ä–æ—á–µ–µ), –∫–µ–º –≤—ã–¥–∞–Ω
- –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ UI –Ω–µ—Ç, —Ç–æ–ª—å–∫–æ generic –∫–∞—Ä—Ç–æ—á–∫–∞
- –ü–æ–ª–µ–∑–µ–Ω –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–∫–∞–∑–æ–≤ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
- –¢–∏–ø—ã –ø—Ä–∏–∫–∞–∑–æ–≤ –ª–æ–≥–∏—á–µ—Å–∫–∏ —Å–≤—è–∑–∞–Ω—ã —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è (–ó–∞–∫–æ–Ω—Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ/–°–ø–∏—Å–∞–Ω–æ)
- **OK**: –æ—Å—Ç–∞–≤–∏—Ç—å, –Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤—è–∑—å order ‚Üí equipment (—á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ "subject_of")

### ‚ö†Ô∏è `land_plot_part` (–ß–∞—Å—Ç—å –ó–£, üó∫)
- –î–æ–±–∞–≤–ª–µ–Ω migration 013, –Ω–æ –ù–ï–¢ –≤ ER –¥–∏–∞–≥—Ä–∞–º–º–µ
- **–ù—É–∂–Ω–æ**: –¥–æ–±–∞–≤–∏—Ç—å –≤ ER –¥–∏–∞–≥—Ä–∞–º–º—É

### –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –ª–µ–π–±–ª—ã –ø–æ–ª–µ–π:
1. `room.room_number` (–ù–æ–º–µ—Ä –ø–æ–º–µ—â–µ–Ω–∏—è) + `name` (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –ø–æ–ª–µ)
   - –ü–æ–ª—É—á–∞–µ—Ç—Å—è: name = "–û—Ñ–∏—Å 201" –∏ room_number = "201" ‚Äî –¥—É–±–ª–∏–∫–∞—Ç
   - **–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ**: —É–±—Ä–∞—Ç—å `room_number`, –≤—Å—ë –≤ name
   
2. `document.doc_type` –æ–ø—Ü–∏–∏ –≤–∫–ª—é—á–∞—é—Ç —Ç–∏–ø—ã –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –µ—Å—Ç—å –∫–∞–∫ —Å—É—â–Ω–æ—Å—Ç–∏
   - –ò—Å–ø—Ä–∞–≤–∏—Ç—å: —É–±—Ä–∞—Ç—å '–ü—Ä–∏–∫–∞–∑','–ê–∫—Ç','–î–æ–ø.—Å–æ–≥–ª–∞—à–µ–Ω–∏–µ' –∏–∑ –æ–ø—Ü–∏–π

3. `crane_track` ‚Äî –Ω–µ—Ç –Ω–∞ sidebar –Ω–∞–≤–∏–≥–∞—Ü–∏–∏? –ü—Ä–æ–≤–µ—Ä–∏—Ç—å.

### building.total_area vs area —É –¥—Ä—É–≥–∏—Ö:
- building: `total_area` (–û–±—â–∞—è –ø–ª–æ—â–∞–¥—å, –º¬≤) ‚Äî OK, —É –∫–æ—Ä–ø—É—Å–∞ –≤ —Ü–µ–ª–æ–º
- room: `area` (–ü–ª–æ—â–∞–¥—å, –º¬≤) ‚Äî OK, —É –ø–æ–º–µ—â–µ–Ω–∏—è
- workshop: `area` (–ü–ª–æ—â–∞–¥—å, –º¬≤) ‚Äî —Ç–æ –∂–µ —Å–∞–º–æ–µ —á—Ç–æ —É building? –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ.

---

## 2. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ ‚Äî –ø–ª–∞–Ω

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è: 3 —É—Ä–æ–≤–Ω—è
```
–ö–∞—Ä—Ç–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ ‚Üí –∫–ª–∏–∫ –Ω–∞ –∫–æ—Ä–ø—É—Å ‚Üí –ø–ª–∞–Ω –∫–æ—Ä–ø—É—Å–∞ ‚Üí –∫–ª–∏–∫ –Ω–∞ –ø–æ–º–µ—â–µ–Ω–∏–µ ‚Üí –¥–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã
```

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ: SVG Hotspot overlay
–ù–µ –Ω—É–∂–µ–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–∞—Ä—Ç. –ü—Ä–æ—Å—Ç–æ–µ –∏ –Ω–∞–¥—ë–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:

**–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
- –í `entity.properties.map_image` = URL –∫–∞—Ä—Ç–∏–Ω–∫–∏ (Yandex Disk / Imgur / base64 –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö)
- –í `entity.properties.hotspots` = JSON array:
  ```json
  [
    { "entity_id": 5, "label": "–ö–æ—Ä–ø—É—Å –ê", "x": 23.5, "y": 45.0, "w": 12.0, "h": 18.0, "color": "#6366F1" },
    { "entity_id": 6, "label": "–ö–æ—Ä–ø—É—Å –ë", "x": 50.0, "y": 30.0, "w": 15.0, "h": 22.0, "color": "#EF4444" }
  ]
  ```
  –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ % ‚Üí responsive, —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–º —ç–∫—Ä–∞–Ω–µ

**–ü—Ä–æ—Å–º–æ—Ç—Ä (viewer):**
```html
<div class="map-viewer" style="position:relative;display:inline-block">
  <img src="[map_image]" style="width:100%;display:block;border-radius:8px">
  <!-- –î–ª—è –∫–∞–∂–¥–æ–≥–æ hotspot: -->
  <div style="position:absolute; left:23.5%; top:45%; width:12%; height:18%;
              background:rgba(99,102,241,0.25); border:2px solid #6366F1;
              border-radius:4px; cursor:pointer; transition: background .2s"
       onmouseover="this.style.background='rgba(99,102,241,0.5)'"
       onmouseout="this.style.background='rgba(99,102,241,0.25)'"
       onclick="showEntity(5)"
       title="–ö–æ—Ä–ø—É—Å –ê">
    <span style="position:absolute;bottom:4px;left:4px;font-size:11px;color:white;font-weight:600">–ö–æ—Ä–ø—É—Å –ê</span>
  </div>
</div>
```

**–¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞ (–±–æ–Ω—É—Å):**
- –ö–æ—Ä–ø—É—Å —Å–æ –≤—Å–µ–º–∏ –ø–æ–º–µ—â–µ–Ω–∏—è–º–∏ –≤ –∞—Ä–µ–Ω–¥–µ = –∑–µ–ª—ë–Ω—ã–π
- –ï—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–µ –ø–æ–º–µ—â–µ–Ω–∏—è = —Å–∏–Ω–∏–π
- –ê–≤–∞—Ä–∏–π–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –≤ –∫–æ—Ä–ø—É—Å–µ = –∫—Ä–∞—Å–Ω—ã–π

**–†–µ–¥–∞–∫—Ç–æ—Ä –∑–æ–Ω (–¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏):**
- –ö–Ω–æ–ø–∫–∞ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—É" –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –∫–æ—Ä–ø—É—Å–∞/—É—á–∞—Å—Ç–∫–∞
- –†–µ–∂–∏–º —Ä–∏—Å–æ–≤–∞–Ω–∏—è: mousedown‚Üímousemove‚Üímouseup —Ä–∏—Å—É–µ—Ç –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫
- –ü–æ—Å–ª–µ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è: —Å–ø–∏—Å–æ–∫ entity –¥–ª—è –≤—ã–±–æ—Ä–∞ —á—Ç–æ —ç—Ç–æ –∑–∞ –∑–æ–Ω–∞
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å = PATCH /entities/:id —Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–º hotspots –≤ properties

**–ù–æ–≤—ã–µ endpoint-—ã:**
- –ù–∏—á–µ–≥–æ –Ω–æ–≤–æ–≥–æ! –í—Å—ë —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `/entities/:id` PATCH
- –í–æ–∑–º–æ–∂–Ω–æ: `GET /map/:entityId` –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ standalone URL

**–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
- –í–∞—Ä–∏–∞–Ω—Ç A: –í–∞–ª–µ–Ω—Ç–∏–Ω–∞ –¥–∞—ë—Ç —Å—Å—ã–ª–∫—É (Google Drive/Yandex/Imgur) ‚Üí –ø—Ä–æ—Å—Ç–æ URL –≤ –ø–æ–ª–µ
- –í–∞—Ä–∏–∞–Ω—Ç B: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ UI ‚Üí –Ω—É–∂–µ–Ω `POST /upload` + —Ö—Ä–∞–Ω–µ–Ω–∏–µ
- **–†–µ–∫–æ–º–µ–Ω–¥—É—é –Ω–∞—á–∞—Ç—å —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞ A** (–ø—Ä–æ—â–µ, Render –Ω–µ —Ö—Ä–∞–Ω–∏—Ç —Ñ–∞–π–ª—ã –º–µ–∂–¥—É –¥–µ–ø–ª–æ—è–º–∏)
- –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ ‚Äî –¥–æ–±–∞–≤–∏—Ç—å Cloudinary free tier (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, 25GB)

**–ß—Ç–æ –Ω—É–∂–Ω–æ –æ—Ç –í–∞–ª–µ–Ω—Ç–∏–Ω—ã:**
1. –°–∫–∞–Ω/—Ñ–æ—Ç–æ –∫–∞—Ä—Ç—ã —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ (PNG, 1200-2000px —à–∏—Ä–∏–Ω–∞)
2. –ü–ª–∞–Ω—ã –∫–æ—Ä–ø—É—Å–æ–≤ (–ø–æ –æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—É –Ω–∞ –∫–æ—Ä–ø—É—Å)
3. –°–ø–∏—Å–æ–∫: –∏–º—è –∫–æ—Ä–ø—É—Å–∞ ‚Üí entity_id –≤ —Å–∏—Å—Ç–µ–º–µ

**–≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è `map_image` –∏ `hotspots` –∫ entity types (building, land_plot)
2. –°–¥–µ–ª–∞—Ç—å viewer –≤ –∫–∞—Ä—Ç–æ—á–∫–µ —Å—É—â–Ω–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å map_image ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞—Ä—Ç—É)
3. –°–¥–µ–ª–∞—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä –∑–æ–Ω (—Ä–∏—Å–æ–≤–∞–Ω–∏–µ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ –º—ã—à—å—é)
4. –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É "–ö–∞—Ä—Ç–∞" –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
5. –¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –∞—Ä–µ–Ω–¥—ã

