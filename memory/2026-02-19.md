# 2026-02-19 — День первый

## Знакомство
- Пользователь: Valentina (ValentinaArta на GitHub)
- Проект: **IndParkDocs** — система документов и связей для индустриального парка
- Стек: Node.js + Express, inline frontend (SPA), SQLite, деплой на Render
- Репо: https://github.com/ValentinaArta/IndParkDocs.git (ветки: `main`, `dev`)

## Проблема
Не работал логин на https://indparkdocs.onrender.com/ — кнопка "Войти" ничего не делала.

## Диагностика
1. Бэкенд работал — API `/api/auth/login` отвечал нормально (admin / 123456)
2. В консоли браузера: `SyntaxError: Unexpected token '('` на строке 222
3. Из-за этого весь JS не загружался → `doLogin` не определялся → кнопка мёртвая

## Найдено 2 бага в `server/src/frontend.js`:

### Баг 1: `catch` без параметра
```javascript
// Было:
try { CURRENT_USER = await api('/auth/me'); } catch { logout(); return; }
// Стало:
try { CURRENT_USER = await api('/auth/me'); } catch (e) { logout(); return; }
```

### Баг 2: Вызов функции в определении параметров
```javascript
// Было (невалидный JS):
function renderFieldInput(enrichFieldOptions(f), value) {
// Стало:
function renderFieldInput(f, value) {
```
Вызовы `renderFieldInput(enrichFieldOptions(f), val)` остались как были — `enrichFieldOptions` применяется при вызове, а не в определении.

## Коммиты
- `e9f263b` — fix: add catch parameter to fix SyntaxError in older browsers
- `96c2fb2` — fix: invalid function declaration syntax in renderFieldInput

## Результат
✅ Логин работает, сайт деплоится на Render.
