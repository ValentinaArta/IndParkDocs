# 2026-02-26 ‚Äî –†–∞–±–æ—á–∏–π –∂—É—Ä–Ω–∞–ª

## –°–µ—Å—Å–∏—è: –ò–∫–æ–Ω–∫–∏ + –∫–∞—Ä—Ç–∞ + –ø–æ–ª–∏–≥–æ–Ω—ã

### –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ —Å–µ–≥–æ–¥–Ω—è

#### 1. –ó–∞–º–µ–Ω–∞ –≤—Å–µ—Ö emoji –Ω–∞ Lucide –∏–∫–æ–Ω–∫–∏ (commit fb2eb73 ‚Üí main 11726dd)
- –î–æ–±–∞–≤–ª–µ–Ω Lucide CDN –≤ HTML head (`unpkg.com/lucide@latest`)
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ö–µ–ª–ø–µ—Ä—ã: `icon(name, size)`, `renderIcons()`, `ENTITY_TYPE_ICONS`, `entityIcon(typeName, size)`
- `const icon = ...` –≤ settings –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `const typeIcon` (–∏–Ω–∞—á–µ shadowing)
- –£–±—Ä–∞–Ω—ã –≤—Å–µ emoji –∏–∑ frontend; –æ—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ Unicode (‚ò∞ ‚úï ‚ö†)
- `renderIcons()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DOM

#### 2. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ (commit fb2eb73)
- –ö–Ω–æ–ø–∫–∞ "–ö–∞—Ä—Ç–∞" –≤ sidebar –ø–æ–¥ "–û–±–∑–æ—Ä–æ–º"
- `showMapPage()`: –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∑–¥–∞–Ω–∏—è + land_plots, —Ä–∏—Å—É–µ—Ç territory.jpg —Å hotspot overlay
- Hotspot viewer: —Ü–≤–µ—Ç–Ω—ã–µ div –æ–≤–µ—Ä–ª–µ–∏ –ø–æ % –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º, –∫–ª–∏–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É —Å—É—â–Ω–æ—Å—Ç–∏
- Hotspot editor: "–†–∞–∑–º–µ—Ç–∏—Ç—å" ‚Üí crosshair ‚Üí draw rect ‚Üí –Ω–∞–∑–Ω–∞—á–∏—Ç—å —Å—É—â–Ω–æ—Å—Ç—å + —Ü–≤–µ—Ç ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
- –£–¥–∞–ª–µ–Ω–∏–µ hotspot: –∫–Ω–æ–ø–∫–∞ √ó –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –î–∞–Ω–Ω—ã–µ hotspot –≤ `entity.properties`: `map_x/y/w/h/color`
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Ä—à—Ä—É—Ç `/maps/` —á–µ—Ä–µ–∑ `express.static`
- –§–∞–π–ª –∫–∞—Ä—Ç—ã: `server/public/maps/territory.jpg` (134K)

#### 3. –û–†–† –í–µ—Å—Ç–∞ —Å–ª–∏—è–Ω–∏–µ (commit 45251fd ‚Üí main 5698a74)
- `mergeORRVesta()` ‚Äî –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –≤ —Ü–µ–ø–æ—á–∫–µ startup
- –°–ª–∏—Ç—ã —Å–≤–æ–π—Å—Ç–≤–∞, –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω—ã relations, –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –ø–æ –∏–º–µ–Ω–∏ –∏ ID
- –£–¥–∞–ª–µ–Ω–∞ "–û–†–† –í–µ—Å—Ç–∞"; –æ—Å—Ç–∞–ª–∞—Å—å "–û–†–† –í–µ—Å—Ç–∞, –ê–û" (id:64, INN:5503033788)
- –í—Å–µ–≥–æ –∫–æ–º–ø–∞–Ω–∏–π —Ç–µ–ø–µ—Ä—å 14

#### 4. –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (2026-02-26, –±–æ–ª–µ–µ —Ä–∞–Ω–Ω–µ–µ)
- –í–∫–ª–∞–¥–∫–∞ "üìã –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏" –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- Backend: `GET/PATCH /api/entity-types/settings/lists`
- –†–µ–¥–∞–∫—Ç–æ—Ä —Å–ø–∏—Å–∫–æ–≤: add/rename/delete –ø—É–Ω–∫—Ç–æ–≤
- `OBJECT_TYPES`, `EQUIPMENT_CATEGORIES`, `EQUIPMENT_STATUSES` –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –ë–î –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

#### 5. Sidebar redesign (commit 42d9306)
- –î–æ–∫—É–º–µ–Ω—Ç—ã + –†–µ–µ—Å—Ç—Ä—ã —Å –∞–∫–∫–æ—Ä–¥–µ–æ–Ω-–≥—Ä—É–ø–ø–∞–º–∏
- –ö–æ—Ä–ø—É—Å–∞ ‚Üí –¥–µ—Ç–∏ lazy-loading; "–≤—Å–µ –ø–æ–º–µ—â–µ–Ω–∏—è" –ø–µ—Ä–≤—ã–π sub-item
- –£–±—Ä–∞–Ω—ã workshop/crane_track/document –∏–∑ –º–µ–Ω—é (–í–∞–ª–µ–Ω—Ç–∏–Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–∞)

#### 6. Room form (commit 64fc7d5)
- Migration 016: —Å–∫—Ä—ã–≤–∞–µ—Ç room_number/room_type (sort_order=999)
- Dropdown —Ç–æ–ª—å–∫–æ –∑–¥–∞–Ω–∏–π; inline quick-create –∑–¥–∞–Ω–∏—è
- `openCreateModal(type, preParentId)` ‚Äî –ø—Ä–µ–¥–≤—ã–±–æ—Ä –∑–¥–∞–Ω–∏—è

#### 7. Remove enrichFieldOptions (commit 14c44a3)
- –í—Å–µ select/select_or_custom –∏—Å–ø–æ–ª—å–∑—É—é—Ç —á–∏—Å—Ç—ã–µ `f.options` –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞
- `renderRegistrySelectField()` ‚Äî dropdown –∏–∑ —Ä–µ–µ—Å—Ç—Ä–∞ —Å "–î—Ä—É–≥–æ–µ..."
- –£–¥–∞–ª—ë–Ω inline-—Ä–µ–¥–∞–∫—Ç–æ—Ä —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è (toggleParentEdit, saveParent)

#### 8. –ê–Ω–∞–ª–∏–∑ –∞—Ä–µ–Ω–¥—ã ‚Äî –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù
- –í—Å–µ 22 —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã —á–µ—Ä–µ–∑ `node -e`
- Backend endpoint `GET /api/reports/rent-analysis`
- –§–∏–ª—å—Ç—Ä—ã, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, —ç–∫—Å–ø–æ—Ä—Ç

### –¢–µ–∫—É—â–∏–π –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–º–∏—Ç
`5698a74` ‚Äî merge: –û–†–† –í–µ—Å—Ç–∞ into –û–†–† –í–µ—Å—Ç–∞ –ê–û

### –í –ø—Ä–æ—Ü–µ—Å—Å–µ (–ø—Ä–µ—Ä–≤–∞–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞)
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–∏–≥–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–∏—Å–æ–≤–∞–Ω–∏—è –¥–ª—è –∫–∞—Ä—Ç—ã —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏:
- **–¶–µ–ª—å**: SVG overlay –≤–º–µ—Å—Ç–æ CSS div –¥–ª—è hotspot-–æ–≤; –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ + –º–Ω–æ–≥–æ—É–≥–æ–ª—å–Ω–∏–∫–∞
- **–î–∞–Ω–Ω—ã–µ**: –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏ ‚Äî `map_x/y/w/h/color`; –ü–æ–ª–∏–≥–æ–Ω—ã ‚Äî `map_shape:'polygon'` + `map_points:'[[x,y],...]'` + `map_color`
- **–§–∞–π–ª**: `/root/workspace-indparkdocs/server/src/frontend.js`
- **–°–µ–∫—Ü–∏—è –∫–∞—Ä—Ç—ã**: —Å—Ç—Ä–æ–∫–∏ ~2247‚Äì2515 (–¥–æ `// ============ DASHBOARD ============`)
- **–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∑–∞–º–µ–Ω—ã**: `showMapPage`, `_mapRenderHotspots`, `_mapToggleEdit`, `_mapBindDrawEvents`, `_mapUnbindDrawEvents`, `_mapGetPercent`, `_mapOnMouseDown/Move/Up`, `_mapShowAssignModal`, `_mapSaveHotspot`, `_mapDeleteHotspot`, `_mapHotspotClick`
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**: `<svg>` overlay —Å viewBox="0 0 100 100" preserveAspectRatio="none"; `<rect>` –¥–ª—è –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤, `<polygon>` –¥–ª—è –ø–æ–ª–∏–≥–æ–Ω–æ–≤
- **–†–µ–∂–∏–º —Ä–∏—Å–æ–≤–∞–Ω–∏—è**: –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ = drag; –º–Ω–æ–≥–æ—É–≥–æ–ª—å–Ω–∏–∫ = –∫–ª–∏–∫ –¥–ª—è —Ç–æ—á–µ–∫ + double-click –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è
- **–ù–ï –ó–ê–î–ï–ü–õ–û–ï–ù–û** ‚Äî –∑–∞–¥–∞—á–∞ –ø—Ä–µ—Ä–≤–∞–Ω–∞ –Ω–∞ —ç—Ç–∞–ø–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á
1. üîç –ü–æ–∏—Å–∫ –ø–æ —Å—É–±–∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä—É (`subtenant_name` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ SQL –ø–æ–∏—Å–∫–∞)
2. üî¢ –ê–≤—Ç–æ–Ω–æ–º–µ—Ä –î–° (max+1 –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ñ–æ—Ä–º—ã)
3. üèõ –°–∫—Ä—ã—Ç—å parent_id –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–π
4. üè¢ Inline-—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∏–∑ —Ñ–æ—Ä–º—ã –¥–æ–≥–æ–≤–æ—Ä–∞
5. üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–ª–∞–¥–µ–Ω–∏—è *(ER ‚Üí —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ)*
6. üë§ –†–∞–∑–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —Å–≤–æ–∏—Ö/—Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö *(ER ‚Üí —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ)*
7. üìã –ü—Ä–µ–¥–º–µ—Ç—ã –¥–æ–≥–æ–≤–æ—Ä–∞ —É—Å–ª—É–≥ *(ER ‚Üí —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ)*
8. üö´ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π –∫–æ–º–ø–∞–Ω–∏–π (fuzzy + INN check)
9. üó∫ –ü–æ–ª–∏–≥–æ–Ω—ã –Ω–∞ –∫–∞—Ä—Ç–µ (SVG overlay ‚Äî –ø—Ä–µ—Ä–≤–∞–Ω–æ)
10. Metabase/BI ‚Äî –∫–æ–≥–¥–∞ –±–∞–∑–∞ –Ω–∞–ø–æ–ª–Ω–∏—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞
- **SCHEMA-FIRST**: –õ—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã ‚Üí ER –¥–∏–∞–≥—Ä–∞–º–º–∞ ‚Üí –û–ö –í–∞–ª–µ–Ω—Ç–∏–Ω—ã ‚Üí –∫–æ–¥
- **NO EMOJIS**: —Ç–æ–ª—å–∫–æ Lucide SVG –∏–∫–æ–Ω–∫–∏
- **`\'` –≤–Ω—É—Ç—Ä–∏ template literal** —Å—ä–µ–¥–∞–µ—Ç—Å—è ‚Üí `'`; –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å data-–∞—Ç—Ä–∏–±—É—Ç—ã –∏–ª–∏ `\\'`
- **`git add .` –ó–ê–ü–†–ï–©–Å–ù** ‚Äî –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ–∞–π–ª—ã —è–≤–Ω–æ
- **`enrichFieldOptions` = –∑–ª–æ** ‚Äî –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å
