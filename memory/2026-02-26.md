# 2026-02-26 ‚Äî –†–∞–±–æ—á–∏–π –∂—É—Ä–Ω–∞–ª

## –°–µ—Å—Å–∏—è: –ò–∫–æ–Ω–∫–∏ + –∫–∞—Ä—Ç–∞ + –ø–æ–ª–∏–≥–æ–Ω—ã

### –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ —Å–µ–≥–æ–¥–Ω—è

#### 1. –ó–∞–º–µ–Ω–∞ –≤—Å–µ—Ö emoji –Ω–∞ Lucide –∏–∫–æ–Ω–∫–∏ (commit fb2eb73 ‚Üí main 11726dd)
- –î–æ–±–∞–≤–ª–µ–Ω Lucide CDN –≤ HTML head (`unpkg.com/lucide@latest`)
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ö–µ–ª–ø–µ—Ä—ã: `icon(name, size)`, `renderIcons()`, `ENTITY_TYPE_ICONS`, `entityIcon(typeName, size)`
- `const icon = ...` –≤ settings –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `const typeIcon` (–∏–Ω–∞—á–µ shadowing)
- –£–±—Ä–∞–Ω—ã –≤—Å–µ emoji –∏–∑ frontend; –æ—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ Unicode (‚ò∞ ‚úï ‚ö†)
- `renderIcons()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DOM

#### 2. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ (commit fb2eb73)
- –ö–Ω–æ–ø–∫–∞ "–ö–∞—Ä—Ç–∞" –≤ sidebar –ø–æ–¥ "–û–±–∑–æ—Ä–æ–º"
- `showMapPage()`: –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∑–¥–∞–Ω–∏—è + land_plots, —Ä–∏—Å—É–µ—Ç territory.jpg —Å hotspot overlay
- Hotspot viewer: —Ü–≤–µ—Ç–Ω—ã–µ div –æ–≤–µ—Ä–ª–µ–∏ –ø–æ % –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º, –∫–ª–∏–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É —Å—É—â–Ω–æ—Å—Ç–∏
- Hotspot editor: "–†–∞–∑–º–µ—Ç–∏—Ç—å" ‚Üí crosshair ‚Üí draw rect ‚Üí –Ω–∞–∑–Ω–∞—á–∏—Ç—å —Å—É—â–Ω–æ—Å—Ç—å + —Ü–≤–µ—Ç ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
- –£–¥–∞–ª–µ–Ω–∏–µ hotspot: –∫–Ω–æ–ø–∫–∞ √ó –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –î–∞–Ω–Ω—ã–µ hotspot –≤ `entity.properties`: `map_x/y/w/h/color`
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Ä—à—Ä—É—Ç `/maps/` —á–µ—Ä–µ–∑ `express.static`
- –§–∞–π–ª –∫–∞—Ä—Ç—ã: `server/public/maps/territory.jpg` (134K)

#### 3. –û–†–† –í–µ—Å—Ç–∞ —Å–ª–∏—è–Ω–∏–µ (commit 45251fd ‚Üí main 5698a74)
- `mergeORRVesta()` ‚Äî –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –≤ —Ü–µ–ø–æ—á–∫–µ startup
- –°–ª–∏—Ç—ã —Å–≤–æ–π—Å—Ç–≤–∞, –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω—ã relations, –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –ø–æ –∏–º–µ–Ω–∏ –∏ ID
- –£–¥–∞–ª–µ–Ω–∞ "–û–†–† –í–µ—Å—Ç–∞"; –æ—Å—Ç–∞–ª–∞—Å—å "–û–†–† –í–µ—Å—Ç–∞, –ê–û" (id:64, INN:5503033788)
- –í—Å–µ–≥–æ –∫–æ–º–ø–∞–Ω–∏–π —Ç–µ–ø–µ—Ä—å 14

#### 4. –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (2026-02-26, –±–æ–ª–µ–µ —Ä–∞–Ω–Ω–µ–µ)
- –í–∫–ª–∞–¥–∫–∞ "üìã –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏" –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- Backend: `GET/PATCH /api/entity-types/settings/lists`
- –†–µ–¥–∞–∫—Ç–æ—Ä —Å–ø–∏—Å–∫–æ–≤: add/rename/delete –ø—É–Ω–∫—Ç–æ–≤
- `OBJECT_TYPES`, `EQUIPMENT_CATEGORIES`, `EQUIPMENT_STATUSES` –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –ë–î –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

#### 5. Sidebar redesign (commit 42d9306)
- –î–æ–∫—É–º–µ–Ω—Ç—ã + –†–µ–µ—Å—Ç—Ä—ã —Å –∞–∫–∫–æ—Ä–¥–µ–æ–Ω-–≥—Ä—É–ø–ø–∞–º–∏
- –ö–æ—Ä–ø—É—Å–∞ ‚Üí –¥–µ—Ç–∏ lazy-loading; "–≤—Å–µ –ø–æ–º–µ—â–µ–Ω–∏—è" –ø–µ—Ä–≤—ã–π sub-item
- –£–±—Ä–∞–Ω—ã workshop/crane_track/document –∏–∑ –º–µ–Ω—é (–í–∞–ª–µ–Ω—Ç–∏–Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–∞)

#### 6. Room form (commit 64fc7d5)
- Migration 016: —Å–∫—Ä—ã–≤–∞–µ—Ç room_number/room_type (sort_order=999)
- Dropdown —Ç–æ–ª—å–∫–æ –∑–¥–∞–Ω–∏–π; inline quick-create –∑–¥–∞–Ω–∏—è
- `openCreateModal(type, preParentId)` ‚Äî –ø—Ä–µ–¥–≤—ã–±–æ—Ä –∑–¥–∞–Ω–∏—è

#### 7. Remove enrichFieldOptions (commit 14c44a3)
- –í—Å–µ select/select_or_custom –∏—Å–ø–æ–ª—å–∑—É—é—Ç —á–∏—Å—Ç—ã–µ `f.options` –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞
- `renderRegistrySelectField()` ‚Äî dropdown –∏–∑ —Ä–µ–µ—Å—Ç—Ä–∞ —Å "–î—Ä—É–≥–æ–µ..."
- –£–¥–∞–ª—ë–Ω inline-—Ä–µ–¥–∞–∫—Ç–æ—Ä —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è (toggleParentEdit, saveParent)

#### 8. –ê–Ω–∞–ª–∏–∑ –∞—Ä–µ–Ω–¥—ã ‚Äî –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù
- –í—Å–µ 22 —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã —á–µ—Ä–µ–∑ `node -e`
- Backend endpoint `GET /api/reports/rent-analysis`
- –§–∏–ª—å—Ç—Ä—ã, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, —ç–∫—Å–ø–æ—Ä—Ç

### –¢–µ–∫—É—â–∏–π –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–º–∏—Ç
`5698a74` ‚Äî merge: –û–†–† –í–µ—Å—Ç–∞ into –û–†–† –í–µ—Å—Ç–∞ –ê–û

### –í –ø—Ä–æ—Ü–µ—Å—Å–µ (–ø—Ä–µ—Ä–≤–∞–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞)
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–∏–≥–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–∏—Å–æ–≤–∞–Ω–∏—è –¥–ª—è –∫–∞—Ä—Ç—ã —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏:
- **–¶–µ–ª—å**: SVG overlay –≤–º–µ—Å—Ç–æ CSS div –¥–ª—è hotspot-–æ–≤; –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ + –º–Ω–æ–≥–æ—É–≥–æ–ª—å–Ω–∏–∫–∞
- **–î–∞–Ω–Ω—ã–µ**: –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏ ‚Äî `map_x/y/w/h/color`; –ü–æ–ª–∏–≥–æ–Ω—ã ‚Äî `map_shape:'polygon'` + `map_points:'[[x,y],...]'` + `map_color`
- **–§–∞–π–ª**: `/root/workspace-indparkdocs/server/src/frontend.js`
- **–°–µ–∫—Ü–∏—è –∫–∞—Ä—Ç—ã**: —Å—Ç—Ä–æ–∫–∏ ~2247‚Äì2515 (–¥–æ `// ============ DASHBOARD ============`)
- **–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∑–∞–º–µ–Ω—ã**: `showMapPage`, `_mapRenderHotspots`, `_mapToggleEdit`, `_mapBindDrawEvents`, `_mapUnbindDrawEvents`, `_mapGetPercent`, `_mapOnMouseDown/Move/Up`, `_mapShowAssignModal`, `_mapSaveHotspot`, `_mapDeleteHotspot`, `_mapHotspotClick`
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**: `<svg>` overlay —Å viewBox="0 0 100 100" preserveAspectRatio="none"; `<rect>` –¥–ª—è –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤, `<polygon>` –¥–ª—è –ø–æ–ª–∏–≥–æ–Ω–æ–≤
- **–†–µ–∂–∏–º —Ä–∏—Å–æ–≤–∞–Ω–∏—è**: –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ = drag; –º–Ω–æ–≥–æ—É–≥–æ–ª—å–Ω–∏–∫ = –∫–ª–∏–∫ –¥–ª—è —Ç–æ—á–µ–∫ + double-click –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è
- **–ù–ï –ó–ê–î–ï–ü–õ–û–ï–ù–û** ‚Äî –∑–∞–¥–∞—á–∞ –ø—Ä–µ—Ä–≤–∞–Ω–∞ –Ω–∞ —ç—Ç–∞–ø–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á
1. üîç –ü–æ–∏—Å–∫ –ø–æ —Å—É–±–∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä—É (`subtenant_name` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ SQL –ø–æ–∏—Å–∫–∞)
2. üî¢ –ê–≤—Ç–æ–Ω–æ–º–µ—Ä –î–° (max+1 –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ñ–æ—Ä–º—ã)
3. üèõ –°–∫—Ä—ã—Ç—å parent_id –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–π
4. üè¢ Inline-—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∏–∑ —Ñ–æ—Ä–º—ã –¥–æ–≥–æ–≤–æ—Ä–∞
5. üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–ª–∞–¥–µ–Ω–∏—è *(ER ‚Üí —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ)*
6. üë§ –†–∞–∑–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —Å–≤–æ–∏—Ö/—Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö *(ER ‚Üí —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ)*
7. üìã –ü—Ä–µ–¥–º–µ—Ç—ã –¥–æ–≥–æ–≤–æ—Ä–∞ —É—Å–ª—É–≥ *(ER ‚Üí —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ)*
8. üö´ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π –∫–æ–º–ø–∞–Ω–∏–π (fuzzy + INN check)
9. üó∫ –ü–æ–ª–∏–≥–æ–Ω—ã –Ω–∞ –∫–∞—Ä—Ç–µ (SVG overlay ‚Äî –ø—Ä–µ—Ä–≤–∞–Ω–æ)
10. ‚è≥ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ (spinner) ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∏ –ª—é–±–æ–º async-–≤—ã–∑–æ–≤–µ –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –º–æ–¥–∞–ª–∫–∏/—Ñ–æ—Ä–º—ã
11. Metabase/BI ‚Äî –∫–æ–≥–¥–∞ –±–∞–∑–∞ –Ω–∞–ø–æ–ª–Ω–∏—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏

---

## –°–µ—Å—Å–∏—è 2 (–≤–µ—á–µ—Ä, ~15:23 UTC): –ö–∞—Ä—Ç–∞ ‚Äî zoom/pan/labels/short_name + —Ñ–∏–∫—Å—ã

### –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

#### 1. –ü–æ–ª–∏–≥–æ–Ω–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ —Å SVG overlay (commit 6d87638, b862021, d91cfc2, 83db469, 5bc4fa7)
- SVG overlay —Å viewBox="0 0 100 100" preserveAspectRatio="none"
- –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏ (`<rect>`) –∏ –ø–æ–ª–∏–≥–æ–Ω—ã (`<polygon>`) –∏–∑ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –†–µ–∂–∏–º —Ä–∏—Å–æ–≤–∞–Ω–∏—è: –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ = drag; –ø–æ–ª–∏–≥–æ–Ω = –∫–ª–∏–∫+dblclick
- –ú–∞—Å—à—Ç–∞–±–Ω–æ-–∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–µ stroke-width/radius/font-size (–¥–µ–ª—è—Ç—Å—è –Ω–∞ `_mapZoom`)

#### 2. Zoom + pan –Ω–∞ –∫–∞—Ä—Ç–µ
- Mouse wheel: 8% per step; zoom to cursor
- –ö–Ω–æ–ø–∫–∏ `+`, `‚àí`, reset; –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç % –∑—É–º–∞
- Pan: left-drag –≤ view mode (grab/grabbing cursor)
- State: `_mapZoom`, `_mapPanX`, `_mapPanY`, `_mapPanDrag`
- –§—É–Ω–∫—Ü–∏–∏: `_mapApplyTransform()`, `_mapZoomTo/In/Out/Reset()`

#### 3. HTML-–ª–µ–π–±–ª—ã –ø–æ–≤–µ—Ä—Ö –∫–∞—Ä—Ç—ã
- `<div id="mapLabels">` overlay –≤ `mapInner`
- `_mapRenderLabels()`: 13px, position:absolute, left:X%, top:Y%
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: `hs.short_name` ‚Üí —Ç–µ–∫—Å—Ç –≤ `()` ‚Üí –ø–æ–ª–Ω–æ–µ –∏–º—è
- Tooltip (title) = –ø–æ–ª–Ω–æ–µ –∏–º—è

#### 4. –°–∂–∞—Ç–∏–µ –∫–∞—Ä—Ç—ã
- Plan.jpg (21 MB) ‚Üí territory.jpg (596 KB) via ImageMagick
- –ö–æ–º–∞–Ω–¥–∞: `convert -define jpeg:size=3000x3000 Plan.jpg -thumbnail 3000x3000\> -quality 75 territory.jpg`

#### 5. Migration 017 ‚Äî –ø–æ–ª–µ short_name –¥–ª—è building + land_plot
- –î–æ–±–∞–≤–ª–µ–Ω–æ `short_name` (name_ru='–ö–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è (–¥–ª—è –∫–∞—Ä—Ç—ã)') –≤ field_definitions
- –ë–∞–≥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω: –∫–æ–ª–æ–Ω–∫–∞ `name_ru`, –∞ –Ω–µ `label`; –Ω–µ—Ç –∫–æ–ª–æ–Ω–∫–∏ `is_required`
- –ö–æ–º–º–∏—Ç—ã: `5fcd785` ‚Üí `5da28f3` (fix)

#### 6. –û–†–† –í–µ—Å—Ç–∞ ‚Äî —Å–ª–∏—è–Ω–∏–µ (–∫–æ–º–º–∏—Ç `5698a74`)
- –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è `mergeORRVesta()` –≤ startup chain
- –û—Å—Ç–∞–ª–∞—Å—å "–û–†–† –í–µ—Å—Ç–∞, –ê–û" (id:64)

### –ù–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞: –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –ó–£
- **–ü—Ä–æ–±–ª–µ–º–∞ 1**: –ü–æ–ª–µ "–°–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫" (balance_owner) –≤–≤–µ–¥–µ–Ω–æ –≤ —Ñ–æ—Ä–º–µ, –Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –ó–£
  - –ü—Ä–∏—á–∏–Ω–∞: –∫–∞—Ä—Ç–æ—á–∫–∞ —á–∏—Ç–∞–µ—Ç `props.balance_owner`, –∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è `balance_owner_id` + `balance_owner_name`
  - –õ–µ–π–±–ª –≤ PROPERTY_LABELS (—Å—Ç—Ä–æ–∫–∞ ~3671): `balance_owner: '–°–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫'`
  - –ù—É–∂–Ω–æ: –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å `balance_owner_name` –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ
- **–ü—Ä–æ–±–ª–µ–º–∞ 2**: "–í—Ö–æ–¥–∏—Ç –≤ (—Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –æ–±—ä–µ–∫—Ç)" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–µ –ó–£
  - –ü—Ä–∏—á–∏–Ω–∞: –ø–æ–ª–µ parent_id —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤ `else`-–≤–µ—Ç–∫–µ –¥–ª—è –Ω–µ-building/room/workshop —Ç–∏–ø–æ–≤ (—Å—Ç—Ä–æ–∫–∞ ~4352‚Äì4356)
  - –ù—É–∂–Ω–æ: –¥–æ–±–∞–≤–∏—Ç—å `land_plot` –≤ —Å–ø–∏—Å–æ–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

### –¢–µ–∫—É—â–∏–π –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–º–∏—Ç
`5da28f3` ‚Äî fix: migration 017 - use name_ru instead of label column

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞
- **SCHEMA-FIRST**: –õ—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã ‚Üí ER –¥–∏–∞–≥—Ä–∞–º–º–∞ ‚Üí –û–ö –í–∞–ª–µ–Ω—Ç–∏–Ω—ã ‚Üí –∫–æ–¥
- **NO EMOJIS**: —Ç–æ–ª—å–∫–æ Lucide SVG –∏–∫–æ–Ω–∫–∏
- **`\'` –≤–Ω—É—Ç—Ä–∏ template literal** —Å—ä–µ–¥–∞–µ—Ç—Å—è ‚Üí `'`; –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å data-–∞—Ç—Ä–∏–±—É—Ç—ã –∏–ª–∏ `\\'`
- **`git add .` –ó–ê–ü–†–ï–©–Å–ù** ‚Äî –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ–∞–π–ª—ã —è–≤–Ω–æ
- **`enrichFieldOptions` = –∑–ª–æ** ‚Äî –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å

---

## –°–µ—Å—Å–∏—è 3 (–ø–æ–∑–¥–Ω–∏–π –≤–µ—á–µ—Ä, ~16:41 UTC): –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ 12 –∑–∞–¥–∞—á + BI views

### –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

#### –ó–∞–¥–∞—á–∏ 1‚Äì12 ‚Äî –≤—Å–µ –∑–∞–≤–µ—Ä—à–µ–Ω—ã

| # | –ó–∞–¥–∞—á–∞ | –ö–æ–º–º–∏—Ç |
|---|--------|--------|
| 1 | –ü–æ–∏—Å–∫ –ø–æ —Å—É–±–∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä—É | `428a441` |
| 2 | –ê–≤—Ç–æ–Ω–æ–º–µ—Ä –î–° | `502ea0e` |
| 3 | parent_id —Å–∫—Ä—ã—Ç –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–π | (—É–∂–µ –±—ã–ª–æ) |
| 4 | –ü–ª–æ—â–∞–¥—å –ó–£: –≥–∞ ‚Üí –∫–≤.–º. | `428a441` |
| 5 | –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫ –Ω–∞ CREATE | `428a441` |
| 6 | –°–ø–∏–Ω–Ω–µ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ | `1a3af39` |
| 7 | Searchable dropdown –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç | `bdea6af` |
| 8 | –ù–î–° –≤ –î–° | `502ea0e` |
| 9 | Searchable dropdown —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫ | `bdea6af` |
| 10 | Quick-create –ó–£ inline | `a23082c` |
| 11 | Inline —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ | (—É–∂–µ –±—ã–ª–æ) |
| 12 | Fuzzy –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π –∫–æ–º–ø–∞–Ω–∏–π | `a23082c` |

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (–Ω–µ –≤ —Å–ø–∏—Å–∫–µ –∑–∞–¥–∞—á)
- **Mobile sidebar toggle** (`419beb1`): hamburger ‚ò∞ + overlay + close ‚úï; sidebar —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ < 768px
- **BI Views** (`1b3959b`): PostgreSQL views –¥–ª—è Metabase:
  - `v_bi_contracts` ‚Äî –¥–æ–≥–æ–≤–æ—Ä—ã —Å –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞–º–∏ + —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞–º–∏
  - `v_bi_supplements` ‚Äî –î–° —Å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º–∏ –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏
  - `v_bi_rent_objects` ‚Äî —Ä–∞—Å–ø–ª—é—â–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –∞—Ä–µ–Ω–¥—ã –∏–∑ JSON
  - `v_bi_equipment` ‚Äî –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ —Å –±–∞–ª–∞–Ω—Å–æ–¥–µ—Ä–∂–∞—Ç–µ–ª–µ–º + –∫–æ—Ä–ø—É—Å–æ–º
  - `v_bi_buildings` ‚Äî –∫–æ—Ä–ø—É—Å–∞ —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–º
  - `v_bi_acts` ‚Äî –∞–∫—Ç—ã —Å –ø–æ–∑–∏—Ü–∏—è–º–∏ (—Ä–∞—Å–ø–ª—é—â–µ–Ω—ã)
  - –í—ã–Ω–µ—Å–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é `runMigration020()` –≤ startup chain

### –¢–µ–∫—É—â–∏–π –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–º–∏—Ç
`1b3959b` ‚Äî feat: create BI views for Metabase

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ—Ç –í–∞–ª–µ–Ω—Ç–∏–Ω—ã)
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å Metabase –∫ IndParkDocs PostgreSQL –∫–æ–≥–¥–∞ –±–∞–∑–∞ –Ω–∞–ø–æ–ª–Ω–∏—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏
- –ö–∞—Ä—Ç–∞: –¥–æ–¥–µ–ª–∞—Ç—å –ø–æ–ª–∏–≥–æ–Ω—ã (SVG ‚Äî –ø—Ä–µ—Ä–≤–∞–Ω–æ, –Ω–µ –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–µ)
- –ó–∞–¥–∞—á–∏ 13‚Äì16 —Ç—Ä–µ–±—É—é—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —Å—Ö–µ–º—ã ER

---

## üìÖ –ò—Ç–æ–≥ –¥–Ω—è (23:10 UTC, –∞–≤—Ç–æ-–¥–Ω–µ–≤–Ω–∏–∫)

**–ë—ã–ª –æ—á–µ–Ω—å –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–π –¥–µ–Ω—å.** –¢—Ä–∏ –±–æ–ª—å—à–∏—Ö —Å–µ—Å—Å–∏–∏, ~20+ –∑–∞–∫—Ä—ã—Ç—ã—Ö –∑–∞–¥–∞—á, 10+ –∫–æ–º–º–∏—Ç–æ–≤ –≤ main.

### –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–∞ –¥–µ–Ω—å
1. **–ó–∞–º–µ–Ω–∞ emoji ‚Üí Lucide –∏–∫–æ–Ω–∫–∏** (fb2eb73) ‚Äî –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π UI
2. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ —Å SVG overlay** (6d87638‚Äì5bc4fa7) ‚Äî zoom/pan, –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏ + –ø–æ–ª–∏–≥–æ–Ω—ã, HTML –ª–µ–π–±–ª—ã, short_name –ø–æ–ª—è
3. **–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö** (af589f8) ‚Äî OBJECT_TYPES, EQUIPMENT_CATEGORIES, EQUIPMENT_STATUSES –∏–∑ –ë–î
4. **Sidebar redesign** (42d9306) ‚Äî –∞–∫–∫–æ—Ä–¥–µ–æ–Ω, lazy-loading –∫–æ—Ä–ø—É—Å–æ–≤, —É–±—Ä–∞–Ω—ã –º—ë—Ä—Ç–≤—ã–µ —Ç–∏–ø—ã
5. **12 –∑–∞–¥–∞—á –∏–∑ –æ—á–µ—Ä–µ–¥–∏** ‚Äî –≤—Å–µ –∑–∞–∫—Ä—ã—Ç—ã (–ø–æ–∏—Å–∫, –∞–≤—Ç–æ–Ω–æ–º–µ—Ä, spinners, searchable dropdowns, inline-create, fuzzy-–¥—É–±–ª–∏, –ù–î–° –≤ –î–° –∏ –¥—Ä.)
6. **Mobile sidebar** (419beb1) ‚Äî hamburger –Ω–∞ < 768px
7. **BI Views** (1b3959b) ‚Äî 6 PostgreSQL views –¥–ª—è –±—É–¥—É—â–µ–≥–æ Metabase
8. **–û–†–† –í–µ—Å—Ç–∞ —Å–ª–∏—è–Ω–∏–µ** (5698a74) ‚Äî –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è, —Ç–µ–ø–µ—Ä—å 14 –∫–æ–º–ø–∞–Ω–∏–π
9. **–£–±—Ä–∞–Ω—ã enrichFieldOptions** (14c44a3) ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö

### –ó–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—ã–π –∫–æ–º–º–∏—Ç –Ω–∞ –∫–æ–Ω–µ—Ü –¥–Ω—è
`1b3959b` (main) ‚Äî feat: create BI views for Metabase

### –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –Ω–∞ –∑–∞–≤—Ç—Ä–∞
- –ó–∞–¥–∞—á–∏ —Ç—Ä–µ–±—É—é—â–∏–µ ER + —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –í–∞–ª–µ–Ω—Ç–∏–Ω—ã (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–ª–∞–¥–µ–Ω–∏—è, –∫–æ–Ω—Ç–∞–∫—Ç—ã, –ø—Ä–µ–¥–º–µ—Ç—ã —É—Å–ª—É–≥, –∫—É–ø–ª—è-–ø—Ä–æ–¥–∞–∂–∞)
- –†–∞–∑–Ω–µ—Å—Ç–∏ –ò–ö –æ–±–æ–≥—Ä–µ–≤–∞—Ç–µ–ª–∏ 10–∫ –ø–æ –±–ª–æ–∫–∞–º
- –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –ø–æ–ª—è–º
- Metabase: –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ–≥–¥–∞ –±–∞–∑–∞ –Ω–∞–ø–æ–ª–Ω–∏—Ç—Å—è
- –ö–∞—Ä—Ç–∞: –ø–æ–ª–∏–≥–æ–Ω—ã (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

---

## üìÖ –ü–æ–∑–¥–Ω—è—è —Å–µ—Å—Å–∏—è (23:20 UTC) ‚Äî Emergency highlighting + –∫–æ–º–ø–∞–∫—Ç–∏–∑–∞—Ü–∏—è

### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏

#### Emergency/Broken highlighting ‚Äî –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- `loadBrokenEquipment()` —Ç–µ–ø–µ—Ä—å —è–≤–Ω–æ `await`-–∏—Ç—Å—è –≤ `buildAggregateReport()`, `runLinkedReport()`, `showEntityList('equipment')`
- –ë–µ–π–¥–∂–∏ –Ω–∞ –ª–∏—Å—Ç–æ–≤—ã—Ö —É–∑–ª–∞—Ö –ò —É–∑–ª–∞—Ö —É—Ä–æ–≤–Ω—è `eq_name` –≤ –¥–µ—Ä–µ–≤–µ
- Commits: `e7b105d`, `438b7d7`

#### Duplicate equipment level fix
- `eqAlreadyGrouped` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç eqGroups –µ—Å–ª–∏ `eq_name` —É–∂–µ –µ—Å—Ç—å –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏
- Commits: `980c31b` (dev), `719e7ae` (main)

#### Contract card view ‚Äî –Ω–æ–≤–æ–µ –ø–µ—Ä–≤–∏—á–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –∞—Ä–µ–Ω–¥—ã
- Endpoint `GET /api/reports/contract-card/:id` –≤ reports.js
- `renderContractCard(data)`, `openContractCard(id)`, `_ccFmtDate()`, `_ccFmtNum()`
- –ö–æ–ª–ª–∞–ø—Å–∏—Ä—É–µ–º—ã–µ —Å–µ–∫—Ü–∏–∏: –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∏ –∏—Å—Ç–æ—Ä–∏—è –î–°
- Commits: `6ec6438` (dev), `cb07486` (main)

#### Contract card –∫–∞–∫ default view
- `showEntity(id, _forceDetail)` –¥–ª—è –∞—Ä–µ–Ω–¥—ã/—Å—É–±–∞—Ä–µ–Ω–¥—ã ‚Üí card view
- `showEntityDetail(id)` ‚Äî wrapper –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ view
- Commits: `124b130` (dev), `2502808` (main)

#### Emergency/broken highlighting –≤–µ–∑–¥–µ
- –ë–µ–∫–µ–Ω–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ò `status='–ê–≤–∞—Ä–∏–π–Ω–æ–µ'` –ò `broken=true` –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∞–∫—Ç–∞
- `is_broken` —Ñ–ª–∞–≥ –≤ equipment_list
- Commits: `8c9e3e3` (dev), `db09f74` (main)

#### ER diagram
- HTML —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω: `/root/workspace-indparkdocs/er-diagram.html`
- –°–∫—Ä–∏–Ω—à–æ—Ç —á–µ—Ä–µ–∑ chromium headless ‚Üí –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –í–∞–ª–µ–Ω—Ç–∏–Ω–µ –≤ Telegram

### –†–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –Ω–µ—Å—Ç–∏–Ω–≥–∞ –∫—Ä–∞–Ω–æ–≤
- –ó–∞–¥–∞—á–∞: –≤—Å–µ –∫—Ä–∞–Ω—ã –≤–ª–æ–∂–µ–Ω—ã –ø–æ–¥ –ø–µ—Ä–≤—ã–π –∫—Ä–∞–Ω (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –Ω–µ–≤–µ—Ä–Ω—É—é –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å)
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –ë–î: id 30‚Äì41 (–∫—Ä–∞–Ω—ã), –≤—Å–µ `parent_id=29` (–∑–¥–∞–Ω–∏–µ –õ–∏—Ç. –ö–ë) ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –í–ï–†–ù–ê–Ø
- `_renderActItem()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–ª–æ—Å–∫–∏–π `<select>` ‚Äî –±–µ–∑ –Ω–µ—Å—Ç–∏–Ω–≥–∞
- –ë–∞–≥ –¢–û–õ–¨–ö–û –≤–æ frontend tree-rendering –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ (–Ω–µ –≤ –¥–∞–Ω–Ω—ã—Ö)
- –ù–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω ‚Äî —Å–µ—Å—Å–∏—è –ø—Ä–µ—Ä–≤–∞–Ω–∞ –∫–æ–º–ø–∞–∫—Ç–∏–∑–∞—Ü–∏–µ–π

### –¢–µ–∫—É—â–∏–π –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—ã–π –∫–æ–º–º–∏—Ç
`db09f74` (main) ‚Äî fix: red highlighting for emergency/broken equipment everywhere

### –í –æ—á–µ—Ä–µ–¥–∏
- –ù–∞–π—Ç–∏ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å tree-rendering –±–∞–≥–∞ –¥–ª—è –∫—Ä–∞–Ω–æ–≤ (–≤—Å–µ –∫—Ä–∞–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –ø–æ–¥ –ø–µ—Ä–≤—ã–π –∫—Ä–∞–Ω)
- Room form cleanup: —É–¥–∞–ª–∏—Ç—å `room_type`, –¥–æ–±–∞–≤–∏—Ç—å `room_number` –≤ –º–∏–≥—Ä–∞—Ü–∏—é
- Grouping rows UX: —Ñ–∏–ª—å—Ç—Ä-—Ö–µ–¥–µ—Ä –≤–º–µ—Å—Ç–æ –¥–µ—Ä–µ–≤–∞
- –ê–Ω–∞–ª–∏–∑ –∞—Ä–µ–Ω–¥—ã: JS —Ñ—É–Ω–∫—Ü–∏–∏ (buildRentAnalysis, renderRentTable)
