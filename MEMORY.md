# MEMORY.md ‚Äî –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –ø–∞–º—è—Ç—å

## –ü—Ä–æ–µ–∫—Ç
- **IndParkDocs** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ —Å–≤—è–∑–µ–π –¥–ª—è –∏–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω–æ–≥–æ –ø–∞—Ä–∫–∞
- –†–µ–ø–æ: https://github.com/ValentinaArta/IndParkDocs.git (–≤–µ—Ç–∫–∏: main, dev)
- –ü—Ä–æ–¥–∞–∫—à–Ω: https://indparkdocs.onrender.com (Render free tier, —Å–ø–∏—Ç –±–µ–∑ –∑–∞–ø—Ä–æ—Å–æ–≤)
- –õ–æ–≥–∏–Ω: admin / 123456
- –°—Ç–µ–∫: Node.js + Express + PostgreSQL + inline SPA (–±–µ–∑ —Å–±–æ—Ä–∫–∏)
- –î–µ–ø–ª–æ–π: push –≤ main ‚Üí –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π Render (~2 –º–∏–Ω)

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- –í–∞–ª–µ–Ω—Ç–∏–Ω–∞ (ValentinaArta –Ω–∞ GitHub)
- –û–±—â–µ–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
- –ù–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç ‚Äî –æ–±—ä—è—Å–Ω—è—Ç—å –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º
- –õ—é–±–∏—Ç –∫–æ–≥–¥–∞ —è —Å–∞–º —Å–ª–µ–∂—É –∑–∞ –¥–µ–ø–ª–æ–µ–º –∏ –ø–∏—à—É —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –≥–æ—Ç–æ–≤–æ

## –ö–ª—é—á–µ–≤—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è

### –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- –ù–ï –∑–∞–ø—É—Å–∫–∞—Ç—å –∏–∑ Procfile (–Ω–µ—Ç DATABASE_URL –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ)
- –í—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤ index.js –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ (runMigration003, runMigration004)
- –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ON CONFLICT DO NOTHING / DO UPDATE

### CI
- GitHub Actions: .github/workflows/ci.yml
- npm ci (–Ω–µ npm install) ‚Äî –Ω—É–∂–µ–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π package-lock.json
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å + frontend JS —á–µ—Ä–µ–∑ new Function()

### Frontend JS
- –í—Å—è –ª–æ–≥–∏–∫–∞ –∏–Ω–ª–∞–π–Ω –≤ frontend.js, –æ—Ç–¥–∞—ë—Ç—Å—è –∫–∞–∫ HTML (–æ–¥–∏–Ω –±–æ–ª—å—à–æ–π template literal)
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å: node -e "new Function('async function __t(){' + m[1] + '}')"
- –û–ü–ê–°–ù–´–ï –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
  - `\'string\'` –≤–Ω—É—Ç—Ä–∏ template literal ‚Üí —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `'string'` –∏ –ª–æ–º–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏ –≤ new Function
  - –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å data-* –∞—Ç—Ä–∏–±—É—Ç—ã –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫ –≤ onclick, –∏–ª–∏ &apos;
  - catch {} –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞

### Git workflow
- feature/task ‚Üí dev ‚Üí (PR) ‚Üí main ‚Üí –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø—É—à–∞: –º–µ—Ä–∂–∏—Ç—å –æ–±–∞ –±—Ä–∞–Ω—á–∞, –∂–¥–∞—Ç—å –¥–µ–ø–ª–æ–π, –ø—Ä–æ–≤–µ—Ä—è—Ç—å

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
- –í—Å–µ —Å—É—â–Ω–æ—Å—Ç–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ entities (contracts, companies, buildings, rooms, equipment...)
- –°–≤—è–∑–∏ —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É relations (party_to, located_in, supplement_to, on_balance)
- –ö–æ–º–ø–∞–Ω–∏–∏: is_own=true ‚Üí –Ω–∞—à–∏ —é—Ä–ª–∏—Ü–∞, false ‚Üí –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã (–æ–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞)
- –î–æ–≥–æ–≤–æ—Ä—ã —Ö—Ä–∞–Ω—è—Ç –∏ entity ID (contractor_id) –∏ –∏–º—è (contractor_name)
- –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ: parent_id = –∏–µ—Ä–∞—Ä—Ö–∏—è (–∑–∞–ø—á–∞—Å—Ç—å‚Üí–∫—Ä–∞–Ω‚Üí–ø—É—Ç—å), located_in relation = –º–µ—Å—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

## –¢–∏–ø—ã —Å—É—â–Ω–æ—Å—Ç–µ–π (–∞–∫—Ç—É–∞–ª—å–Ω–æ)
| –¢–∏–ø | –ò–∫–æ–Ω–∫–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----|--------|-----------|
| building | üè¢ | –ö–æ—Ä–ø—É—Å |
| workshop | üè≠ | –¶–µ—Ö |
| room | üö™ | –ü–æ–º–µ—â–µ–Ω–∏–µ |
| land_plot | üåç | –ó–µ–º–µ–ª—å–Ω—ã–π —É—á–∞—Å—Ç–æ–∫ |
| company | üèõ | –ö–æ–º–ø–∞–Ω–∏—è (is_own=true/false) |
| contract | üìÑ | –î–æ–≥–æ–≤–æ—Ä |
| supplement | üìé | –î–æ–ø. —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ |
| equipment | ‚öôÔ∏è | –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ |
| order | üìú | –ü—Ä–∏–∫–∞–∑ |
| document | üìã | –î–æ–∫—É–º–µ–Ω—Ç |
| crane_track | üõ§ | –ü–æ–¥–∫—Ä–∞–Ω–æ–≤—ã–π –ø—É—Ç—å |
| act | üìù | –ê–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç (–¥–æ–±–∞–≤–ª–µ–Ω 2026-02-24) |

## –ü–æ–ª—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è (–ø–æ—Å–ª–µ migration 004)
- equipment_category: –≠–ª–µ–∫—Ç—Ä–æ–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ / –ì–∞–∑–æ–≤–æ–µ / –¢–µ–ø–ª–æ–≤–æ–µ / –ö—Ä–∞–Ω–æ–≤–æ–µ —Ö–æ–∑—è–π—Å—Ç–≤–æ / –ú–∞—à–∏–Ω—ã –∏ –º–µ—Ö–∞–Ω–∏–∑–º—ã / –ò–ö –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
- equipment_kind: —Å–≤–æ–±–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç (–ø–æ–¥—Å—Ç–∞–Ω—Ü–∏—è, –∫–æ—Ç—ë–ª, –∫—Ä–∞–Ω...)
- inv_number, serial_number, year, manufacturer
- status: –í —Ä–∞–±–æ—Ç–µ / –ù–∞ —Ä–µ–º–æ–Ω—Ç–µ / –ó–∞–∫–æ–Ω—Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ / –°–ø–∏—Å–∞–Ω–æ
- balance_owner: entity selector (–Ω–∞—à–∏ –∫–æ–º–ø–∞–Ω–∏–∏, is_own=true) ‚Üí —Ö—Ä–∞–Ω–∏—Ç balance_owner_id + balance_owner_name
- note

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–∞–∫—Ç—É–∞–ª—å–Ω–æ –Ω–∞ 2026-02-23)
- –î–æ–≥–æ–≤–æ—Ä—ã: —Å–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ (–ü–æ–¥—Ä—è–¥, –ê—Ä–µ–Ω–¥–∞, –°—É–±–∞—Ä–µ–Ω–¥–∞, –£—Å–ª—É–≥–∏, –ö—É–ø–ª—è-–ø—Ä–æ–¥–∞–∂–∞...)
- –î–æ–ø. —Å–æ–≥–ª–∞—à–µ–Ω–∏—è —Å –ø–æ–ª–µ–º "—á—Ç–æ –ø–æ–º–µ–Ω—è–ª–æ—Å—å"
- –§–æ—Ä–º–∞ –∞—Ä–µ–Ω–¥—ã: –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã, –∞–≤—Ç–æ—Ä–∞—Å—á—ë—Ç –∞—Ä–µ–Ω–¥—ã, –ù–î–° 22%, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- Entity selectors (–Ω–∞—à–µ —é—Ä–ª–∏—Ü–æ, –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç, –∫–æ—Ä–ø—É—Å, –ø–æ–º–µ—â–µ–Ω–∏–µ) ‚Äî styled –∫–∞–∫ select_or_custom
- –ê–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ relations –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–æ–≥–æ–≤–æ—Ä–∞ (party_to, located_in)
- –ò–µ—Ä–∞—Ä—Ö–∏—è —á–µ—Ä–µ–∑ parent_id, –ø–æ–ª–Ω—ã–π —Ö–ª–µ–±–Ω—ã–π –∫—Ä–æ—à–∫–∏ —Å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–º CTE
- Inline —Ä–µ–¥–∞–∫—Ç–æ—Ä —Ä–æ–¥–∏—Ç–µ–ª—è –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ —Å—É—â–Ω–æ—Å—Ç–∏
- –ë–æ–∫–æ–≤–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è: –î–æ–∫—É–º–µ–Ω—Ç—ã + –†–µ–µ—Å—Ç—Ä—ã (–≤—Å–µ —Ç–∏–ø—ã —Å—É—â–Ω–æ—Å—Ç–µ–π)
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–û—Ç—á—ë—Ç—ã":
  - –í–∫–ª–∞–¥–∫–∞ "–°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞" ‚Äî pivot –ø–æ –ª—é–±–æ–º—É –ø–æ–ª—é
  - –í–∫–ª–∞–¥–∫–∞ "–ü–æ —Å–≤—è–∑—è–º":
    - –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –ø–æ –∫–æ—Ä–ø—É—Å–∞–º (via parent_id OR located_in relation)
    - –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ —É –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤ (via party_to ‚Üí contract ‚Üí located_in ‚Üí building ‚Üí equipment)
- –ö–æ–º–ø–∞–Ω–∏–∏ –≤ –ë–î: 6 –∑–∞–ø–∏—Å–µ–π (2 –Ω–∞—à–∏—Ö + 4 –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞), –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –¥–æ–≥–æ–≤–æ—Ä–∞–º

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (2026-02-24) ‚Äî –ê–∫—Ç—ã + –¥–æ—Ä–∞–±–æ—Ç–∫–∏
- Migration 005: entity type `act`, field_definitions, relation type `supplement_to`
- `autoLinkEntities`: –≤–µ—Ç–∫–∞ –¥–ª—è act ‚Üí —Å–æ–∑–¥–∞—ë—Ç `supplement_to` –∫ –¥–æ–≥–æ–≤–æ—Ä—É + `subject_of` –æ—Ç –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
- Aggregate report: Path 2 (equipment ‚Üí subject_of ‚Üí act ‚Üí supplement_to ‚Üí contract) —Å —Å—É–º–º–æ–π –∏–∑ act_items
- Frontend: —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–∫—Ç–∞ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º —Å–ø–∏—Å–∫–æ–º –ø–æ–∑–∏—Ü–∏–π (–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ/—Å—É–º–º–∞/–æ–ø–∏—Å–∞–Ω–∏–µ)
- –ù–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –¥–æ–≥–æ–≤–æ—Ä–∞: —Å–µ–∫—Ü–∏—è "–ê–∫—Ç—ã" + –∫–Ω–æ–ø–∫–∞ "+ –ê–∫—Ç"
- –ù–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è: —Å–µ–∫—Ü–∏—è "–ò—Å—Ç–æ—Ä–∏—è —Ä–∞–±–æ—Ç" (–≤—Å–µ –∞–∫—Ç—ã –≥–¥–µ —É—á–∞—Å—Ç–≤—É–µ—Ç —ç—Ç–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ)
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–∫—Ç–∞**: `parent_id = contract_id`, `act_items` = JSON-–º–∞—Å—Å–∏–≤ –ø–æ–∑–∏—Ü–∏–π, `supplement_to` relation + `subject_of` –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏
- –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –≤ —Ñ–æ—Ä–º–µ –∞–∫—Ç–∞ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è –ø–æ equipment_list –¥–æ–≥–æ–≤–æ—Ä–∞ (_actEquipmentList)
- –ü–æ–ª—è parent_contract_id/name ‚Äî readonly/hidden –≤ edit-—Ñ–æ—Ä–º–µ
- Migration 006: –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ ‚Üí **–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è**, –ø–æ–ª—è service_subject / service_comment
- Migration 007: –ø–æ–ª–µ contract_end_date (–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –¥–æ) –¥–ª—è contract + supplement
- –ü–æ–ª–µ "–≤ —Ç.—á. –ù–î–°, %" –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –æ–±—â–∏–µ –ø–æ–ª—è –≤—Å–µ—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤
- **–ò–∑–º–µ–Ω—è–µ–º—ã–π —Ä–∞–∑–º–µ—Ä –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω**: —Å—Ç–∞–Ω–¥–∞—Ä—Ç / —à–∏—Ä–æ–∫–∏–π (860px) / –≤–µ—Å—å —ç–∫—Ä–∞–Ω; setModalContent() / setModalSize() ‚Äî –ó–ê–ü–õ–ê–ù–ò–†–û–í–ê–ù–û, –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- Latest deployed commit: `4026fb5` (2026-02-24) ‚Äî debug alert –≤ openCreateActModal

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ, 2026-02-23)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤: POST /entities –ø—Ä–æ–≤–µ—Ä—è–µ—Ç LOWER(name)+entity_type_id ‚Üí 409 —Å –¥–∞–Ω–Ω—ã–º–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π
- frontend api(): err.status + err.data; 409 –±–µ–∑ auto-alert
- _doSubmitCreate(): confirm() –¥–∏–∞–ª–æ–≥ –ø—Ä–∏ 409, –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—É—â–Ω–æ—Å—Ç—å
- –ü–∏–≤–æ—Ç-—Ç–∞–±–ª–∏—Ü–∞: _pivotCellData (rows/cols/cells —Å –º–∞—Å—Å–∏–≤–∞–º–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π), –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ —è—á–µ–π–∫–∏
- showPivotCellDetail(): drill-down –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–¥ —Ç–∞–±–ª–∏—Ü–µ–π
- "–ò—Ç–æ–≥–æ, –¥–æ–≥–æ–≤–æ—Ä—ã" ‚Äî –µ–¥–∏–Ω–∏—Ü—ã –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∏—Ç–æ–≥–æ–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–Ω—Ç—Ä–∞–∫—Ç id=6: our_legal_entity ¬´–ó–≤–µ–∑–¥–∞¬ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∫–∞–≤—ã—á–∫–∞–º–∏
- –ê—É–¥–∏—Ç –º–µ—Ç–æ–∫ –ø–æ–ª–µ–π –ø–∏–≤–æ—Ç–∞ ‚Äî –≤—Å–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã, —É–±—Ä–∞–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ
- Equipment inline-create –≤ —Ñ–æ—Ä–º–µ –¥–æ–≥–æ–≤–æ—Ä–∞ –∞—Ä–µ–Ω–¥—ã
- autoLinkEntities() —Å–æ–∑–¥–∞—ë—Ç subject_of relation (equipment ‚Üí contract)
- **Pivot equipment mode** (commit 8a010c9, –ó–ê–î–ï–ü–õ–û–ï–ù):
  - –ê–≤—Ç–æ-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –µ—Å–ª–∏ –≤ –∑–æ–Ω–∞—Ö —Å—Ç—Ä–æ–∫/–∫–æ–ª–æ–Ω–æ–∫ –µ—Å—Ç—å eq_* –ø–æ–ª—è ‚Üí equipment mode
  - –°—á–∏—Ç–∞–µ—Ç –µ–¥–∏–Ω–∏—Ü—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è, –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ equipment_id
  - eq_* virtual fields: eq_name, eq_category, eq_kind, eq_status, eq_inv_number, eq_manufacturer

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (2026-02-25) ‚Äî –ê–Ω–∞–ª–∏–∑ –∞—Ä–µ–Ω–¥—ã (—á–∞—Å—Ç–∏—á–Ω–æ)
- Migration 009: –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ balance_owner ‚Üí –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫; land_plot/building fields; `located_on` relation
- Building form: –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫ (company selector), land_plot selector, quickCreateLandPlot(), `located_on` relation
- "–ò—Å—Ç–æ—Ä–∏—è —Ä–∞–±–æ—Ç" report tab: backend `GET /reports/work-history`, —Ç–∞–±–ª–∏—Ü–∞: —Å—Ç—Ä–æ–∫–∏=–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ, –∫–æ–ª–æ–Ω–∫–∏=–¥–∞—Ç—ã –∞–∫—Ç–æ–≤, —è—á–µ–π–∫–∏=–æ–ø–∏—Å–∞–Ω–∏—è+—Å—É–º–º—ã+—Å—Å—ã–ª–∫–∏, –ò—Ç–æ–≥–æ ‚ÇΩ
- AGG_CONTRACT_TYPES: –∏—Å–∫–ª—é—á–µ–Ω—ã –ê—Ä–µ–Ω–¥—ã/–°—É–±–∞—Ä–µ–Ω–¥—ã (–≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –≤–∫–ª–∞–¥–∫—É)
- "+ –ê–∫—Ç" 409 –¥—É–±–ª–∏—Ä—É–µ—Ç ‚Üí confirm –¥–∏–∞–ª–æ–≥ (commit `16f7bcc`)
- "–ê–Ω–∞–ª–∏–∑ –∞—Ä–µ–Ω–¥—ã" tab: **–±—ç–∫–µ–Ω–¥ + HTML/CSS –∑–∞–¥–µ–ø–ª–æ–µ–Ω—ã, JS —Ñ—É–Ω–∫—Ü–∏–∏ –ù–ï –∑–∞–≤–µ—Ä—à–µ–Ω—ã**
  - Backend: `GET /api/reports/rent-analysis` —Ñ–ª–∞—Ç—Ç–µ–Ω–∏—Ç rent_objects –∏–∑ –ê—Ä–µ–Ω–¥–∞/–°—É–±–∞—Ä–µ–Ω–¥–∞
  - Frontend: –≤–∫–ª–∞–¥–∫–∞ + —Å–µ–∫—Ü–∏—è + CSS –µ—Å—Ç—å, JS —Ñ—É–Ω–∫—Ü–∏–∏ (buildRentAnalysis, renderRentTable, —Ñ–∏–ª—å—Ç—Ä—ã, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞) –Ω–µ –¥–æ–ø–∏—Å–∞–Ω—ã
  - –ù—É–∂–Ω–æ: `_rentAllRows`, `_rentFilters`, `_rentGroupBy` + 7 —Ñ—É–Ω–∫—Ü–∏–π (—Å–º. memory/2026-02-25.md)

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (2026-02-25 —Å–µ—Å—Å–∏—è 2)
- –ê–Ω–∞–ª–∏–∑ –∞—Ä–µ–Ω–¥—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç: —Ñ–∏–ª—å—Ç—Ä—ã, resize –∫–æ–ª–æ–Ω–æ–∫, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞
- 3 –Ω–æ–≤—ã—Ö –ø–æ–ª—è –∞—Ä–µ–Ω–¥—ã: net_rate (—á–∏—Å—Ç–∞—è —Å—Ç–∞–≤–∫–∞), utility_rate (–ö–£), external_rental (—á–µ–∫–±–æ–∫—Å)
- –ê–∫—Ç: –¥–≤–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—è –Ω–∞ –ø–æ–∑–∏—Ü–∏—é + –ø–æ–ª–µ "–ó–∞–∫–ª—é—á–µ–Ω–∏–µ" –Ω–∞ —É—Ä–æ–≤–Ω–µ –∞–∫—Ç–∞
- Migration 010: conclusion field + act comment ‚Üí textarea
- Migration 011: equipment status options += "–ê–≤–∞—Ä–∏–π–Ω–æ–µ"
- Migration 012: room fields ‚Äî room_type, description, area, floor
- –ê–≤–∞—Ä–∏–π–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ: CSS `.eq-emergency-badge` (#b85c5c), –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –≤ 4 –º–µ—Å—Ç–∞—Ö
- Act item bgIdx: —á–µ—Ä–µ–¥—É—é—â–∏–µ—Å—è —Ñ–æ–Ω—ã —á–µ—Ä–µ–∑ 3–π –ø–∞—Ä–∞–º–µ—Ç—Ä `_renderActItem(item, rowId, bgIdx)`
- "–ê—Ä–µ–Ω–¥–∞ –≤–Ω–µ—à–Ω—è—è" –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –¥–æ–≥–æ–≤–æ—Ä–∞ (–æ–¥–∏–Ω —á–µ–∫–±–æ–∫—Å –Ω–∞ –¥–æ–≥–æ–≤–æ—Ä)
- "–ß–∞—Å—Ç—å/–¶–µ–ª–∏–∫–æ–º" (rent_scope) —É–¥–∞–ª—ë–Ω –≤–µ–∑–¥–µ
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–º–µ—â–µ–Ω–∏–π –∏–∑ —Ñ–æ—Ä–º—ã –∞—Ä–µ–Ω–¥—ã (mini-form —Å —Ç–∏–ø–æ–º/–∫–æ—Ä–ø—É—Å–æ–º/–ø–ª–æ—â–∞–¥—å—é/—ç—Ç–∞–∂–æ–º)
- "–°–∫–ª–∞–¥" –¥–æ–±–∞–≤–ª–µ–Ω –≤ OBJECT_TYPES
- –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ç–∏–ø –æ–±—ä–µ–∫—Ç–∞: `__custom__` ‚Üí `_showCustomInput` flag ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ OBJECT_TYPES
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª: `_fmtNum()` ‚Äî `toLocaleString('ru-RU', {maximumFractionDigits:2})`
- Backend `/api/reports/rent-analysis`: CTE latest_supps —Å DISTINCT ON –¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–æ–ø—Å–æ–≥–ª–∞—à–µ–Ω–∏—è

## –ó–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—ã–π –∫–æ–º–º–∏—Ç
`a1a2d26` (main + dev)

## üöß –í –ø—Ä–æ—Ü–µ—Å—Å–µ (–Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ) ‚Äî 7 –∑–∞–¥–∞—á
1. **–í–∏–∑—É–∞–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤ –ø–æ–∑–∏—Ü–∏–π –∞–∫—Ç–∞** ‚Äî –±–µ–ª—ã–π —Ñ–æ–Ω + border —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –≤–º–µ—Å—Ç–æ —á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏—è
2. **"–ù–µ—Ä–∞–±–æ—á–∏–π/–∞–≤–∞—Ä–∏–π–Ω—ã–π" —á–µ–∫–±–æ–∫—Å** –Ω–∞ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É —Å "–†–∞–±–æ—Ç—ã/–∑–∞–º–µ—á–∞–Ω–∏—è"
3. **AGG_CONTRACT_TYPES –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é checked** ‚Äî `renderAggFilters()` ~line 2502
4. **–ü–æ–¥—Å–≤–µ—Ç–∫–∞ broken/emergency –≤ linked report** ‚Äî `showLinkedReport()` + `_brokenEqIds`
5. (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ) –ê–≤–∞—Ä–∏–π–Ω–æ–µ/–Ω–µ—Ä–∞–±–æ—á–µ–µ –ø–æ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É –∞–∫—Ç—É
6. **–§–∏–ª—å—Ç—Ä –ø–æ–º–µ—â–µ–Ω–∏–π –≤ –æ—Ç—á—ë—Ç–∞—Ö –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è** ‚Äî LEFT‚ÜíINNER JOIN –≤ `equipment_by_tenant`
7. **–ó–∞–¥–∞—á–∞ 7 (–ö–†–£–ü–ù–ê–Ø)**: –£–±—Ä–∞—Ç—å OBJECT_TYPES select –∏–∑ –∞—Ä–µ–Ω–¥—ã ‚Üí –ø—Ä—è–º–æ–π –≤—ã–±–æ—Ä –ü–æ–º–µ—â–µ–Ω–∏—è/–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –∏–∑ —Ä–µ–µ—Å—Ç—Ä–æ–≤. –ù–æ–≤—ã–µ –ø–æ–ª—è: `item_type`, `room_id`, `equipment_id`. –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏ `object_type`.
   - –ú–Ω–æ–≥–æ —Ç–æ—á–µ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π: `renderRentObjectBlock`, load logic, rent-analysis backend

## –ü–ª–∞–Ω—ã / Next Steps
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å 7 –∑–∞–¥–∞—á (–Ω–∞—á–∞—Ç—å —Å –∑–∞–¥–∞—á 3-6 –∫–∞–∫ –ø—Ä–æ—Å—Ç—ã—Ö, –ø–æ—Ç–æ–º 7)
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏–∑ –∞—Ä–µ–Ω–¥—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ê–∫—Ç—ã (—Å–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π, –æ–±–∞ –ø–æ–ª—è + –∑–∞–∫–ª—é—á–µ–Ω–∏–µ)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–º–µ—â–µ–Ω–∏–π –∏–∑ —Ñ–æ—Ä–º—ã –∞—Ä–µ–Ω–¥—ã
