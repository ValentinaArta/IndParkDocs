# Code Review ‚Äî IndParkDocs (–æ—Ç main-–∞–≥–µ–Ω—Ç–∞, Opus)
–î–∞—Ç–∞: 2026-02-27

## üî¥ CRITICAL

### 1. –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å—Ç–∞—Ä—Ç–µ
- **–ü—Ä–æ–±–ª–µ–º–∞:** 18 –º–∏–≥—Ä–∞—Ü–∏–π + mergeORRVesta –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä–∏ –ö–ê–ñ–î–û–ú `node index.js`. mergeORRVesta –¥–µ–ª–∞–µ—Ç DELETE.
- **–§–∞–π–ª:** `server/src/index.js` (—Å—Ç—Ä–æ–∫–∏ —Å runMigration003 –¥–æ –∫–æ–Ω—Ü–∞)
- **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `migrations`, –∫–∞–∂–¥–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ª–∏ –æ–Ω–∞. mergeORRVesta —É–±—Ä–∞—Ç—å –∏–∑ –∞–≤—Ç–æ-–∑–∞–ø—É—Å–∫–∞.

### 2. SSL: rejectUnauthorized: false –≤ production
- **–ü—Ä–æ–±–ª–µ–º–∞:** MITM-—É—è–∑–≤–∏–º–æ—Å—Ç—å
- **–§–∞–π–ª:** `server/src/db.js`
- **–†–µ—à–µ–Ω–∏–µ:** `rejectUnauthorized: true` –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `DB_SSL_REJECT_UNAUTHORIZED`

### 3. CSP –æ—Ç–∫–ª—é—á—ë–Ω
- **–ü—Ä–æ–±–ª–µ–º–∞:** `contentSecurityPolicy: false` –≤ Helmet
- **–§–∞–π–ª:** `server/src/index.js`
- **–†–µ—à–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CSP —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º inline —á–µ—Ä–µ–∑ nonce

## üü† HIGH

### 4. JWT_SECRET –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **–ü—Ä–æ–±–ª–µ–º–∞:** `'change-me-in-production'` ‚Äî –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –∫–ª—é—á
- **–§–∞–π–ª:** `server/src/middleware/auth.js`
- **–†–µ—à–µ–Ω–∏–µ:** –í—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –æ—à–∏–±–∫—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –µ—Å–ª–∏ JWT_SECRET –Ω–µ –∑–∞–¥–∞–Ω –≤ production

### 5. –û–¥–∏–Ω JWT_SECRET –¥–ª—è access –∏ refresh
- **–§–∞–π–ª:** `server/src/middleware/auth.js`
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å JWT_REFRESH_SECRET

### 6. frontend.js ‚Äî 6749 —Å—Ç—Ä–æ–∫
- **–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ–π—á–∞—Å, –Ω–æ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å**

### 7. –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å Jest + Supertest –¥–ª—è auth –∏ entities CRUD

### 8. PATCH –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç autoLinkEntities ‚Äî –ë–ê–ì
- **–§–∞–π–ª:** `server/src/routes/entities.js`, PATCH handler
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ autoLinkEntities –∫–∞–∫ –≤ PUT

## üü° MEDIUM

### 9. contract-card: 6-8 –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Üí –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å
### 10. –ù–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –≤ reports
### 11. –†–∞–∑–Ω—ã–µ –ø—É—Ç–∏ –∫ .env –≤ –º–∏–≥—Ä–∞—Ü–∏—è—Ö
### 12. –ù–µ—Ç –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö refresh_tokens
### 13. –ù–µ—Ç CSRF (–¥–ª—è JWT API –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

## üü¢ LOW
### 14. Structured logging
### 15. .env.example
### 16. XSS middleware
### 17. API.md

## ‚úÖ –•–æ—Ä–æ—à–æ —Å–¥–µ–ª–∞–Ω–æ:
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ë–î (EAV) ‚Äî –≥–∏–±–∫–∞—è
- Soft delete, audit log, rate limiting, Joi validation
- –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ SQL (–Ω–µ—Ç –∏–Ω—ä–µ–∫—Ü–∏–π)
- XSS-–∑–∞—â–∏—Ç–∞, error handler

---

**–ó–ê–î–ê–ù–ò–ï:** –°–æ—Å—Ç–∞–≤—å –ø–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—É–Ω–∫—Ç–∞ —É–∫–∞–∂–∏: —á—Ç–æ –º–µ–Ω—è—Ç—å, –æ—Ü–µ–Ω–∫—É –≤—Ä–µ–º–µ–Ω–∏, —Ä–∏—Å–∫–∏. –ù–∞—á–Ω–∏ —Å CRITICAL. –ù–ï –î–ï–õ–ê–ô –ò–ó–ú–ï–ù–ï–ù–ò–Ø ‚Äî —Ç–æ–ª—å–∫–æ –ø–ª–∞–Ω. –û—Ç–ø—Ä–∞–≤—å –ø–ª–∞–Ω –í–∞–ª–µ–Ω—Ç–∏–Ω–µ –Ω–∞ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ.
